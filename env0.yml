version: 1

deploy:
  steps:
    terraformPlan:
      before:
        - echo "1"
      after:
        - echo "2"
    
    terraformPlanApproval:
      before:
        - echo "3"
      after:
        - echo "4"

    terraformApply:
      before:
        - |
            pip3 install pyvmomi
            python3 getallvms.py -s $HOST -o $PORT -u $USER -p $PASSWORD -S
